# 1927번 최소 힙

<aside>

## 문제

널리 잘 알려진 자료구조 중 최소 힙이 있다. 최소 힙을 이용하여 다음과 같은 연산을 지원하는 프로그램을 작성하시오.

1. 배열에 자연수 x를 넣는다.
2. 배열에서 가장 작은 값을 출력하고, 그 값을 배열에서 제거한다.

프로그램은 처음에 비어있는 배열에서 시작하게 된다.

</aside>

<aside>

## 입력

첫째 줄에 연산의 개수 N(1 ≤ N ≤ 100,000)이 주어진다. 다음 N개의 줄에는 연산에 대한 정보를 나타내는 정수 x가 주어진다. 만약 x가 자연수라면 배열에 x라는 값을 넣는(추가하는) 연산이고, x가 0이라면 배열에서 가장 작은 값을 출력하고 그 값을 배열에서 제거하는 경우이다. x는 231보다 작은 자연수 또는 0이고, 음의 정수는 입력으로 주어지지 않는다.

</aside>

<aside>

## 출력

입력에서 0이 주어진 횟수만큼 답을 출력한다. 만약 배열이 비어 있는 경우인데 가장 작은 값을 출력하라고 한 경우에는 0을 출력하면 된다.

</aside>

이 문제는 우선순위 큐 알고리즘을 활용해서 풀면 좋은 문제이다.

<aside>

### 우선순위 큐

```cpp
#include <functional>
```

우선순위 큐를 사용하기 위해서는 `<functional>` 헤더파일을 필요로 한다.

```cpp
priority_queue <int> q;
```

위와 같이 일반적으로 `priority_queue`를 사용하면, 큐 내에서 가장 큰 값을 우선순위로 두는 **최대 힙**으로 동작 한다.

따라서 이때 가장 앞에 있는 값을 출력하면 가장 큰 값이 출력된다.

그러나 이 문제에서는 최대 힙이 아닌 최소 힙을 구해야하므로 위의 코드만을 사용할 수는 없다.

```cpp
priority_queue <int, vector <int>, greater <int>> q;
```

따라서 위와 같이 코드를 수정해야 한다.

1. `priority_queue<int, ...>` : **우선순위 큐에 저장할 요소의 타입**을 나타낸다. 여기서는 int 형을 저장하겠다고 선언했다.
2. `..., vector<int>, ...`> : **우선순위 큐를 구현할 기반 컨테이너를 지정**한다. 우선순위 큐는 내부적으로 힙을 구현하기 위해 vector를 사용한다. 따라서 `vector <int>`를 지정하여 정수들을 담을 벡터를 기반으로 우선순위 큐를 만들겠다고 명시한 것이다.
3. `..., greater<int>>` : **우선순위의 기준(비교 연산자)를 결정**한다.
    - `greater <int>`는 C++ 표준 라이브러리에서 제공하는 **함수 객체**이다.
    - 두 값을 비교했을 때 첫 번째 값이 두 번째 값보다 더 크다를 true로 반환한다.
    - 우선순위 큐는 이 `greater<int>`를 사용하여 **더 크다고 판단되는 요소의 우선순위를 낮게 처리한다**. 따라서 자연스럽게 **더 작은 값이 더 높은 우선순위**를 갖게 되어 최소 힙이 만들어지게 된다.
</aside>

위와 같이 우선순위 큐를 활용하여 만든 코드는 아래와 같다.

```cpp
#include <iostream>
#include <queue>
#include <vector>
#include <functional> // 우선순위 큐를 사용하기 위한 헤더파일
using namespace std;

int main() {
	ios_base::sync_with_stdio(false);
	cin.tie(NULL);
	cout.tie(NULL);

	int n;
	priority_queue <int, vector <int>, greater <int>> q;
	// 우선순위 큐
	cin >> n;

	while (n--) {
		int x;
		cin >> x;

		if (x == 0) {
			if (q.empty()) {
				cout << 0 << '\n';
				continue;
			}
			else {
				cout << q.top() << '\n';
				// 우선순위 큐에서는 .front()가 아닌 .top() 함수를 쓴다.
				q.pop();
			}
		}
		else {
			q.push(x);
		}
	}
}
```
